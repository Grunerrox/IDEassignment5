<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/css/bootstrap-select.min.css">

    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">

</head>

<body>
    <nav class="navbar navbar-light bg-faded">
        <div class="container">
            <a class="navbar-brand" href="#">Mapping crime</a>
        </div>
    </nav>
    <div class="container" style="margin-top: 50px;">
<h1>Crime incidents in the city of San Francisco</h1>

<p>
    San Francisco was infamous for having some of the world's most notorious criminals on the top-notch security prison of Alcatraz
    island.<br/> Today, the prison is shutdown and the city is more known for the internet industry and are a very popular
    place to live for people employed in Silicon Valley companies such as Apple and Google. With this rising wealth inequality
    in the city, it is interesting to see where the crime incidents are taking place in San Francisco. To analyse this we
    have a dataset "sf_crime.geojson" which holds reports on 10.000 randomly samples of crimes that has happend across all
    of San Franciscos neighborhoods from 2003 to 2015. This we will visualize by plotting the map over San Francisco and
    then all the crimes in an interactive plot.
</p>



<!--Description: in this assignment you will mine a dataset (sf_crime.geojson) of 10.000 randomly sampled and-->
<!--geocoded crime incidents in the city of San Francisco. Your job is to make at least two significant data-->
<!--discoveries and support your findings with at least one map visualization. You may optionally use additional-->
<!--visualizations.-->
<!--The original dataset is described on https://www.kaggle.com/c/sf-crime. There, you can also download the-->
<!--original CSV file (~800,000 incidents). We have created a police district dataset (sfpd_districts.geojson),-->
<!--which may or may not be useful to you.-->
<!--We have created the GeoJSON file using shuf and head (Linux commands) to sample the original CSV file and-->
<!--ogr2ogr to convert from CSV to GeoJSON.-->
<!--Allowed tools: You may use D3, CartoDB.com or another web-ready visualization tool.-->
<!--Hand in: please submit only a link to a webpage that contains your final solution.-->

<!--Formulate an brief description of the topic of your final project. Create a new discussion on the Absalon-->
<!--Discussion page and post the description of the project there. The projects must be pre-approved by me,-->
<!--before you start working on them (mainly to ensure that it is feasible within our time frame). I'll try to-->
<!--respond within 24 hours (with some potential exceptions around Christmas and New Year). Note that you might-->
<!--be asked to reconsider parts of your projects, so I recommend that you don't wait until the last moment to-->
<!--start thinking about this. This part (Part 2) of Assignment 5 will not be graded.-->
    <p>
        We start by analysing the data set by using D3js, where we add a filter on tyoe of crime and the year the
        crime has taken place. By selecting the filters it is only these that will show up on the map, and the
        bar plot that are located below the map.<br/>
        To investigate further it is possible to select a crime by mouse over a circle or by clicking, which will
        give more information on the crime in the top left corner of the map.
    </p>
        <hr>
    <h2>Visualization using D3js</h2>
        <p>The barplot below is a reflection of the data shown in the map of San Francisco. It's easier to see exactly what crimes that are committed the most.
            The barplot will change along with the filters that are chosen. When investigating the barplot we see that
            the top 10 most frequent crimes is: LARCENY/THEFT, OTHER OFFENSES, NON-CRIMINAL,
            ASSAULT, DRUG/NARCOTIC, VEHICLE THEFT, VANDALISM, WARRANTS, BURGLARY and SUSPICIOUS OCC. A big difference in 2003
            and 2015 is that MISSING PERSON is in top 10 in 2015 and there is a big difference in number of crimes.
            LARENCY/THEFT is the most common crime in 2010 and 2015 and the number of occurrence is 65 percent higher in 2010 then in 2015.
        </p>

        <div class="barplot">

        </div>
<div class="map">
    <h2>San Francisco</h2>
    <p><b><span class="crimeNumber"></span></b>&nbsp;crimes shown</p>
    <div class="filters">
        <p>Filters</p>
        <div class="selectYear"></div>
        <div class="select"></div>
    </div>
</div>
<div style="height: 120px;"></div>


<hr>
<h2>Visualization using Carto Map</h2>
<iframe width="100%" height="520" frameborder="0" src="https://grunerrox.carto.com/builder/320a5a3a-c9cd-11e6-ad3a-0e05a8b3e3d7/embed"
    allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen>
</iframe>
<p>
    The above visualization is made using Carto.com. The visualization takes the aggregation of crimes in the marked area. The
    area with the most crimes are yellow, and the areas with the least crime is dark blue. As we can see on our visualization
    the most crime overall, is located around the Central district.
</p>

<h2>Conclusion</h2>
<p>The D3 created map immediately invites for exploration. We are used to using different kind of maps, so clicking on the map is expected to be a natural action. When clicking on a crime it is shown in detail in the upper left corner. The detailed information for each crime does however not yield any interesting results in terms of data exploration. There are so many crimes that it's hard to find any meaningful pattern. Color coding for different crimes might have shown some patterns that would aid the data exploration part.</p>
<p>A solution to the above problem is to use CartoDB. This quickly puts the data into different categories and makes it easy to sort for different features. It's quickly visible that there is a high concentration of crimes in the city center of San Franciso. Small patterns emerge when the data is filtered. Drug/Narcotic is specifically centered around Post Street, Geary Street, Hyde Street, Turk Street and Taylor Street. Maybe not entirely suprising we see that assaults are concentrated around the same areas. If we look at only burglary then we see that there is a high concentration just beside the Narcotic area. It would seem that burglary happens in short distance to where drugs are being sold but not entirely the same place. This could be due to people fleeing crime scenes and selling valuables in the drugs area.</p>
</div>


<script src="./script.js"></script>

</body>

</html>
